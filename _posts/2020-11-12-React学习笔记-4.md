---
layout: post
title: React学习笔记-4
subtitle:
date: 2020-11-12
author: BY Aaron
header-img: img/tag-bg.jpg
catalog: true
tags:
  - React
---

1.  Class 组件创建方式

        ```js
        import React from 'react';

        class A extends React.Component{
            constructor(props){
                super(props)
            } 
            render(){
                return (<div>hi</div>)
            }
        }
        export default A;
        ```
2. props 外部数据就要外部通过外部更改，不要内部修改外部数据
3. UNSAFE_componentWillReceiveProps(newProps,content){}

    这是react旧的钩子，现在已经废弃不用，当props变化时，会自动运行newProps是改变后的值
4. props作用：

    * 接受外部数据
      * 只能读不能写
      * 外部数据由父组件传递 
    * 接受外部函数
      * 再恰当的时机，调用该函数
      * 该函数一般是父组件的函数
5. state
    * 使用setState后不会立即更新数据
        ```js
        class Welcome extents React.Component{
           constructor(){  //初始化
               super()
               this.state={
                   n:0
               }
           }
           add(){
               this.setState({n:this.state.n+1})
               console.log(this.state.n)     //0
           }
           render(){
               return <h1>Hello,{this.props.name}</h1>
           }
       }
        ```
6. 生命周期
   1. constructor（） 初始化state
   2. static getDerivedStateFromProps()
   3. shouldComponentUpdate() return false 阻止更新
   4. render() 创建虚拟dom
   5. getSnapshotBeforeUpdate()
   6. componentDidMount() 组件已经挂载后执行
   7. componentDidUpdate() 组件已经更新后执行
   8. componentWillUnmount() 组件将要卸载后执行
   9. static getDerivedStateFromError()
   10. componentDidCatch()
7.  constructor
    1.  初始化state,但此时不能调用setState
    2.  初始化props
    3.  用来写bind this
        ```js
        constructor(){  
            super()
            this.onClick = this.onClick.bind(this)
        }
        ```
        但是可以用新语法替代
        ```js
        onClick=()=>{}
        constructor(){  
            super()
        }
        ```
    4.  可以不写
8. shouldComponentUpdate
   1. 返回true表示不阻止UI更新
   2. 返回false表示阻止UI更新
   3.  用处是允许我们手动判断是否要进行组件更新,灵活的设置返回值避免不必要的更新
9. 
